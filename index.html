<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jasper æ•¸ç† - VIP è§£é¡Œé ç´„</title>
    <style>
        /* --- è¦–è¦ºè¨­è¨ˆ (å°ˆæ¥­é»‘é‡‘é¢¨æ ¼) --- */
        body { background-color: #121212; color: #e0e0e0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 0; padding-bottom: 80px; }
        h2 { margin: 0; padding: 20px; text-align: center; background: #1e1e1e; color: #00e676; border-bottom: 1px solid #333; font-size: 20px; letter-spacing: 1px; }
        
        /* åº•éƒ¨å°èˆª */
        .nav-bar { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: #1e1e1e; display: flex; border-top: 1px solid #333; z-index: 1000; box-shadow: 0 -2px 10px rgba(0,0,0,0.5); }
        .nav-item { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #888; font-size: 11px; cursor: pointer; transition: 0.2s; }
        .nav-item.active { color: #00e676; background: #252525; }
        .nav-icon { font-size: 22px; margin-bottom: 4px; }

        /* åˆ†é å…§å®¹ */
        .tab-content { display: none; padding: 20px; animation: fadeIn 0.4s; max-width: 600px; margin: 0 auto; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* è¼¸å…¥æ¬„ä½ */
        label { color: #00e676; font-size: 14px; font-weight: bold; margin-bottom: 8px; display: block; margin-top: 15px; }
        input, select, textarea { width: 100%; padding: 14px; background: #2c2c2c; border: 1px solid #444; color: #fff; border-radius: 8px; font-size: 16px; margin-bottom: 5px; box-sizing: border-box; transition: 0.2s; outline: none; }
        input:focus, select:focus { border-color: #00e676; background: #333; }
        
        /* æ™‚é–“å€å¡Š */
        .time-group { display: flex; gap: 10px; }
        .time-box { flex: 1; }
        
        /* ç…§ç‰‡ä¸Šå‚³å€å¡Š */
        .upload-area { border: 2px dashed #444; border-radius: 10px; padding: 20px; text-align: center; margin-top: 10px; cursor: pointer; transition: 0.3s; background: #1e1e1e; }
        .upload-area:hover { border-color: #00e676; background: #252525; }
        .upload-icon { font-size: 40px; color: #888; margin-bottom: 10px; }
        .preview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; margin-top: 15px; }
        .preview-item { width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 6px; border: 1px solid #555; }

        /* æŒ‰éˆ• */
        button { width: 100%; padding: 16px; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 25px; transition: 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
        button:active { transform: scale(0.98); }
        .btn-calc { background: linear-gradient(135deg, #2979ff, #1565c0); color: white; }
        
        /* ç‰¹æ®Šåˆ†äº«æŒ‰éˆ• */
        .btn-share { background: linear-gradient(135deg, #00c853, #b2ff59); color: #000; } 
        .btn-line-text { background: #06c755; color: white; }

        /* è¨‚å–®çµæœå¡ç‰‡ */
        .price-card { background: #1e1e1e; border-radius: 12px; padding: 20px; margin-top: 20px; border: 1px solid #333; box-shadow: 0 10px 20px rgba(0,0,0,0.3); text-align: center; display: none; }
        .big-price { font-size: 48px; color: #00e676; font-weight: bold; margin: 15px 0; text-shadow: 0 0 10px rgba(0, 230, 118, 0.3); }
        
        .detail-row { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding: 8px 0; font-size: 14px; color: #ccc; }
        .detail-row:last-child { border-bottom: none; }
        .detail-val { font-weight: bold; color: #fff; }

        /* æŒ‰éˆ•ç¾¤çµ„ */
        .action-group { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .btn-action { width: 100%; padding: 14px; border-radius: 8px; font-weight: bold; font-size: 16px; border: none; cursor: pointer; text-decoration: none; display: flex; align-items: center; justify-content: center; }

        /* è­¦å‘Šæ–‡å­— */
        .warning-box { background: #3e2723; color: #ffcc80; padding: 12px; border-radius: 6px; margin-top: 15px; font-size: 13px; text-align: left; line-height: 1.5; border-left: 4px solid #ff9800; }
        .status-badge { display: inline-block; padding: 4px 10px; background: #333; color: #00e676; border-radius: 20px; font-size: 12px; border: 1px solid #00e676; margin-bottom: 10px;}

        /* å¡ç‰‡æ¨£å¼ */
        .info-card { background: #1e1e1e; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #2979ff; }
        .info-header { font-weight: bold; font-size: 16px; margin-bottom: 5px; color: #fff; }
        .info-content { color: #aaa; font-size: 14px; line-height: 1.6; }
        
        optgroup { color: #aaa; background: #1e1e1e; }
    </style>
</head>
<body>

    <h2 id="pageTitle">Jasper æ•¸ç† - VIP è§£é¡Œé ç´„</h2>

    <div id="tab-booking" class="tab-content active">
        <div style="text-align: center;">
            <span class="status-badge">âš¡ ç·šä¸Šå¿«é€Ÿè§£é¡Œç³»çµ±</span>
        </div>
        
        <label>ğŸ‘¤ å­¸ç”Ÿå§“å</label>
        <input type="text" id="studentName" placeholder="è«‹è¼¸å…¥å§“å">
        
        <label>ğŸ“ é¸æ“‡å¹´ç´š</label>
        <select id="gradeLevel">
            <optgroup label="åœ‹å°éƒ¨">
                <option value="p1">åœ‹å°ä¸€å¹´ç´š</option>
                <option value="p2">åœ‹å°äºŒå¹´ç´š</option>
                <option value="p3">åœ‹å°ä¸‰å¹´ç´š</option>
                <option value="p4">åœ‹å°å››å¹´ç´š</option>
                <option value="p5">åœ‹å°äº”å¹´ç´š</option>
                <option value="p6">åœ‹å°å…­å¹´ç´š</option>
            </optgroup>
            <optgroup label="åœ‹ä¸­éƒ¨">
                <option value="j1">åœ‹ä¸­ä¸€å¹´ç´š</option>
                <option value="j2">åœ‹ä¸­äºŒå¹´ç´š</option>
                <option value="j3">åœ‹ä¸­ä¸‰å¹´ç´š</option>
            </optgroup>
            <optgroup label="é«˜ä¸­éƒ¨">
                <option value="s1">é«˜ä¸­ä¸€å¹´ç´š</option>
                <option value="s2">é«˜ä¸­äºŒå¹´ç´š</option>
                <option value="s3">é«˜ä¸­ä¸‰å¹´ç´š</option>
            </optgroup>
        </select>

        <label>ğŸ“š é¸æ“‡ç§‘ç›®</label>
        <select id="subject">
            <option value="æ•¸å­¸">æ•¸å­¸</option>
            <option value="ç†åŒ–">ç†åŒ–</option>
            <option value="ç‰©ç†">ç‰©ç†</option>
            <option value="åŒ–å­¸">åŒ–å­¸</option>
            <option value="ç”Ÿç‰©/è‡ªç„¶">ç”Ÿç‰©/è‡ªç„¶</option>
            <option value="è‹±æ–‡">è‹±æ–‡</option>
            <option value="åœ‹æ–‡">åœ‹æ–‡</option>
            <option value="ç¤¾æœƒ">ç¤¾æœƒ</option>
        </select>

        <label>ğŸ› ï¸ è§£é¡Œæ–¹å¼ (1æ¬¡5é¡Œ)</label>
        <select id="serviceType">
            <option value="standard">åœ–æ–‡è©³è§£ (ä¸€èˆ¬)</option>
            <option value="video">éŒ„å½±è§£èªª (åŠ å€¼æœå‹™)</option>
        </select>

        <label>ğŸ•’ é ç´„æ™‚é–“è¨­å®š</label>
        <div class="warning-box" style="margin-top:0; margin-bottom:10px; background:#2c2c2c; border-left-color:#888; color:#aaa;">
            âš ï¸ è€å¸«è§£é¡Œéœ€è¦æ™‚é–“ï¼Œé å®šèˆ‡è§£ç­”æ™‚é–“éœ€é–“éš” <b>40åˆ†é˜</b> ä»¥ä¸Šã€‚
        </div>
        
        <div class="time-group">
            <div class="time-box">
                <div style="font-size:12px; color:#00e676; margin-bottom:4px;">é–‹å§‹è§£é¡Œæ™‚é–“</div>
                <input type="datetime-local" id="startTime">
            </div>
            <div class="time-box">
                <div style="font-size:12px; color:#2979ff; margin-bottom:4px;">å¸Œæœ›æ”¶åˆ°è§£ç­”</div>
                <input type="datetime-local" id="endTime">
            </div>
        </div>

        <label>ğŸ“· ä¸Šå‚³é¡Œç›® (ä¸Šé™ 5 é¡Œ)</label>
        <div class="upload-area" onclick="document.getElementById('qImages').click()">
            <div class="upload-icon">ğŸ“¸</div>
            <div style="color:#aaa; font-size:14px;">é»æ“Šé¸æ“‡ç…§ç‰‡<br><span style="font-size:12px; color:#666;">(è«‹ç¢ºèªå…‰ç·šå……è¶³ï¼Œå­—è·¡æ¸…æ™°)</span></div>
        </div>
        <input type="file" id="qImages" accept="image/*" multiple style="display:none;" onchange="handleFiles()">
        
        <div id="previewArea" class="preview-grid"></div>

        <div class="warning-box" id="photoWarning" style="display:none;">
            âš ï¸ <b>æ³¨æ„ï¼š</b> ç…§ç‰‡è‹¥æ¨¡ç³Šã€åå…‰ï¼Œè€å¸«æœ‰æ¬Šé€€å›è¦æ±‚é‡æ‹ã€‚
        </div>

        <button class="btn-calc" onclick="createOrder()">ğŸ“ è¨ˆç®—è²»ç”¨ä¸¦é ç´„</button>

        <div id="orderResult" class="price-card">
            <div style="color:#888; font-size:12px;">æœ¬æ¬¡æœå‹™ç¸½é¡ (é ˆå…ˆä»˜æ¬¾)</div>
            <div class="big-price" id="finalPrice">$0</div>
            
            <div class="detail-row"><span>ğŸ‘¤ å­¸ç”Ÿ</span><span class="detail-val" id="resName">--</span></div>
            <div class="detail-row"><span>ğŸ“ å¹´ç´š</span><span class="detail-val" id="resGrade">--</span></div>
            <div class="detail-row"><span>ğŸ› ï¸ æ¨¡å¼</span><span class="detail-val" id="resType">--</span></div>
            <div class="detail-row"><span>â° æœŸé™</span><span class="detail-val" id="resTime">--</span></div>
            
            <div class="warning-box" style="background: #263238; border-color: #00e676;">
                âœ… <b>é ç´„å–®å·²å»ºç«‹ï¼</b><br>
                ç‚ºäº†ç¢ºä¿è€å¸«æ”¶åˆ°ç…§ç‰‡ï¼Œè«‹ä¾ç…§ä¸‹æ–¹æ­¥é©Ÿæ“ä½œï¼š
            </div>
            
            <div class="action-group">
                <button id="btnSmartShare" class="btn-action btn-share" onclick="smartShare()">
                    ğŸš€ è¤‡è£½æ–‡å­—ä¸¦å‚³é€
                </button>
                <div id="pasteHint" style="color:#b2ff59; font-size:12px; text-align:center;">
                    ğŸ‘† é»æ“Šå¾Œï¼Œè«‹åœ¨ LINE å°è©±æ¡†é•·æŒ‰ã€Œè²¼ä¸Šã€
                </div>

                <a href="#" id="lineLink" class="btn-action btn-line-text" target="_blank" style="display:none;">
                    ğŸ’¬ åƒ…å‚³é€æ–‡å­— (èˆŠç‰ˆ)
                </a>

                <a href="#" id="addFriendLink" target="_blank" style="text-align:center; color:#888; font-size:12px; text-decoration:underline;">
                    å…ˆåŠ è€å¸«å¥½å‹
                </a>
            </div>
        </div>
    </div>

    <div id="tab-rules" class="tab-content">
        <div class="info-card" style="border-left-color: #ff3d00;">
            <div class="info-header">ğŸš« NG ç…§ç‰‡ç¯„ä¾‹</div>
            <div class="info-content">
                âŒ <b>å¤ªé /å¤ªå°ï¼š</b> è€å¸«çœ‹ä¸æ¸…æ¥šé¡Œç›®ç´°ç¯€ã€‚<br>
                âŒ <b>æ¨¡ç³Š/æ™ƒå‹•ï¼š</b> å°ç„¦å¤±æ•—ç„¡æ³•è¾¨è­˜ã€‚<br>
                âŒ <b>åš´é‡åå…‰ï¼š</b> ç´™å¼µåå…‰é®ä½æ–‡å­—ã€‚<br>
                âŒ <b>æ­ªæ–œæ‰­æ›²ï¼š</b> è«‹ç›¡é‡å¾æ­£ä¸Šæ–¹å¹³æ‹ã€‚
            </div>
        </div>
        <div class="info-card" style="border-left-color: #00e676;">
            <div class="info-header">âœ… å®Œç¾ç…§ç‰‡æŒ‡å—</div>
            <div class="info-content">
                1. <b>å…‰æºå……è¶³ï¼š</b> åœ¨æª¯ç‡ˆæˆ–æ˜äº®è™•æ‹æ”ã€‚<br>
                2. <b>æ­£é¢å¹³æ‹ï¼š</b> æ‰‹æ©Ÿèˆ‡ç´™å¼µå¹³è¡Œã€‚<br>
                3. <b>é©ç•¶è£åˆ‡ï¼š</b> ä¸€å¼µç…§ç‰‡ä¸€é¡Œï¼Œå»é™¤ä¸å¿…è¦çš„èƒŒæ™¯ã€‚<br>
                4. <b>æª¢æŸ¥ç•«é¢ï¼š</b> å‚³é€å‰è«‹è‡ªå·±å…ˆçœ‹ä¸€éæ˜¯å¦æ¸…æ™°ã€‚
            </div>
        </div>
    </div>

    <div id="tab-info" class="tab-content">
        <div class="radar-card info-card">
            <div class="info-header" style="color:#ffcc00;">ğŸ’° æ”¶è²»æ¨™æº– (1æ¬¡5é¡Œ)</div>
            <div class="info-content">
                <div style="margin-bottom:8px; border-bottom:1px solid #444; padding-bottom:5px;">
                    <b style="color:#fff;">ğŸŸ¢ åœ‹å°éƒ¨ (1-6å¹´ç´š)</b><br>
                    â€¢ åœ–æ–‡è©³è§£ï¼š$100<br>
                    â€¢ éŒ„å½±è§£èªªï¼š$300
                </div>
                <div style="margin-bottom:8px; border-bottom:1px solid #444; padding-bottom:5px;">
                    <b style="color:#fff;">ğŸ”µ åœ‹ä¸­éƒ¨ (1-3å¹´ç´š)</b><br>
                    â€¢ åœ–æ–‡è©³è§£ï¼š$200<br>
                    â€¢ éŒ„å½±è§£èªªï¼š$500
                </div>
                <div>
                    <b style="color:#fff;">ğŸ”´ é«˜ä¸­éƒ¨ (1-3å¹´ç´š)</b><br>
                    â€¢ åœ–æ–‡è©³è§£ï¼š$500<br>
                    â€¢ éŒ„å½±è§£èªªï¼š$1000
                </div>
            </div>
        </div>
        <div class="radar-card info-card">
            <div class="info-header" style="color:#2979ff;">âš ï¸ æœå‹™é ˆçŸ¥</div>
            <div class="info-content">
                â€¢ <b>é ç´„è¦å‰‡ï¼š</b> æå•æ™‚é–“èˆ‡æ”¶ä»¶æ™‚é–“éœ€é–“éš”è‡³å°‘ 40 åˆ†é˜ã€‚<br>
                â€¢ <b>ä»˜æ¬¾æ–¹å¼ï¼š</b> æ”¯æ´è½‰å¸³ / Line Pay (è«‹æ–¼ Line ä¸­ç¢ºèª)ã€‚<br>
                â€¢ <b>æœå‹™æµç¨‹ï¼š</b> å‚³é¡Œ -> ä»˜æ¬¾ -> è€å¸«è§£é¡Œ -> æº–æ™‚äº¤å·ã€‚
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="switchTab('booking')">
            <div class="nav-icon">ğŸ“</div><div>é ç´„è§£é¡Œ</div>
        </div>
        <div class="nav-item" onclick="switchTab('rules')">
            <div class="nav-icon">ğŸ“·</div><div>æ‹ç…§è¦ç¯„</div>
        </div>
        <div class="nav-item" onclick="switchTab('info')">
            <div class="nav-icon">â„¹ï¸</div><div>åƒ¹ç›®è¡¨</div>
        </div>
    </div>

    <script>
        // ================= å…¨å±€è¨­å®š =================
        const MY_LINE_ID = "love_ice_boy"; 

        function initTime() {
            const now = new Date();
            const format = (d) => {
                const pad = n => n < 10 ? '0'+n : n;
                return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}`;
            };
            document.getElementById('startTime').value = format(now);
            now.setHours(now.getHours() + 1);
            document.getElementById('endTime').value = format(now);
        }
        initTime();

        // ================= æª”æ¡ˆè™•ç†é‚è¼¯ =================
        let selectedFilesCount = 0;

        function handleFiles() {
            const input = document.getElementById('qImages');
            const previewArea = document.getElementById('previewArea');
            const files = input.files;
            
            if (files.length > 5) {
                alert("âš ï¸ ä¸€æ¬¡æœ€å¤šåªèƒ½ä¸Šå‚³ 5 é¡Œå–”ï¼è«‹é‡æ–°é¸æ“‡ã€‚");
                input.value = ""; 
                previewArea.innerHTML = "";
                document.getElementById('photoWarning').style.display = 'none';
                selectedFilesCount = 0;
                return;
            }

            previewArea.innerHTML = "";
            selectedFilesCount = files.length;

            if (selectedFilesCount > 0) {
                document.getElementById('photoWarning').style.display = 'block';
                Array.from(files).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'preview-item';
                        previewArea.appendChild(img);
                    }
                    reader.readAsDataURL(file);
                });
            } else {
                document.getElementById('photoWarning').style.display = 'none';
            }
        }

        let finalLineMsg = "";

        // ================= è¨ˆç®—åƒ¹æ ¼èˆ‡é©—è­‰é‚è¼¯ =================
        function createOrder() {
            const name = document.getElementById('studentName').value;
            const gradeVal = document.getElementById('gradeLevel').value;
            const gradeText = document.getElementById('gradeLevel').options[document.getElementById('gradeLevel').selectedIndex].text;
            const subject = document.getElementById('subject').value;
            const serviceType = document.getElementById('serviceType').value;
            const serviceTypeText = document.getElementById('serviceType').options[document.getElementById('serviceType').selectedIndex].text;
            
            const startTimeStr = document.getElementById('startTime').value;
            const endTimeStr = document.getElementById('endTime').value;

            // 1. åŸºæœ¬è³‡æ–™é©—è­‰
            if(!name) return alert("è«‹è¼¸å…¥å­¸ç”Ÿå§“å");
            if(selectedFilesCount === 0) return alert("è«‹è‡³å°‘é¸æ“‡ä¸€å¼µé¡Œç›®ç…§ç‰‡");
            if(!startTimeStr || !endTimeStr) return alert("è«‹è¨­å®šå®Œæ•´çš„é ç´„æ™‚é–“");

            // 2. æ™‚é–“é–“éš”é©—è­‰ (40åˆ†é˜)
            const startDate = new Date(startTimeStr);
            const endDate = new Date(endTimeStr);
            const diffMs = endDate - startDate;
            const diffMins = diffMs / 1000 / 60;

            if (diffMins < 40) {
                return alert("âš ï¸ æ™‚é–“è¨­å®šéŒ¯èª¤ï¼\nã€Œå¸Œæœ›æ”¶åˆ°è§£ç­”æ™‚é–“ã€å¿…é ˆæ¯”ã€Œé–‹å§‹è§£é¡Œæ™‚é–“ã€æ™šè‡³å°‘ 40 åˆ†é˜ã€‚");
            }

            // 3. åƒ¹æ ¼è¨ˆç®—
            let price = 0;
            const stage = gradeVal.charAt(0); 
            if (stage === 'p') price = (serviceType === 'video') ? 300 : 100;
            else if (stage === 'j') price = (serviceType === 'video') ? 500 : 200;
            else if (stage === 's') price = (serviceType === 'video') ? 1000 : 500;

            // 4. æ›´æ–° UI çµæœ
            document.getElementById('finalPrice').innerText = `$${price}`;
            document.getElementById('resName').innerText = name;
            document.getElementById('resGrade').innerText = `${gradeText} / ${subject}`;
            document.getElementById('resType').innerText = serviceTypeText;
            
            const fmtTime = (d) => `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()} ${d.getHours().toString().padStart(2,'0')}:${d.getMinutes().toString().padStart(2,'0')}`;
            document.getElementById('resTime').innerText = fmtTime(endDate);

            // 5. ç”Ÿæˆè¨Šæ¯ (å­˜å…¥å…¨åŸŸè®Šæ•¸)
            finalLineMsg = `æˆ‘è¦é ç´„è§£é¡Œæœå‹™
----------------
å­¸ç”Ÿï¼š${name}
å¹´ç´šï¼š${gradeText}
ç§‘ç›®ï¼š${subject}
æ¨¡å¼ï¼š${serviceTypeText}
è²»ç”¨ï¼š$${price} (é ˆå…ˆä»˜æ¬¾)
----------------
é å®šé–‹å§‹ï¼š${fmtTime(startDate)}
å¸Œæœ›å®Œæˆï¼š${fmtTime(endDate)}
é¡Œæ•¸ï¼šå…± ${selectedFilesCount} é¡Œ
----------------
æˆ‘å·²é–±è®€è¦ç¯„ï¼Œä¸¦æº–å‚™å¥½å°‡é¡Œç›®ç…§ç‰‡å‚³é€çµ¦è€å¸«ã€‚è«‹æä¾›ä»˜æ¬¾å¸³è™Ÿï¼Œè¬è¬ï¼`;

            document.getElementById('addFriendLink').href = `https://line.me/ti/p/~${MY_LINE_ID}`;
            
            // å¼·åˆ¶é¡¯ç¤ºåˆ†äº«æŒ‰éˆ• (ä¸å†æª¢æŸ¥æ”¯æ´åº¦ï¼Œè€Œæ˜¯é»æ“Šå¾Œæ‰æª¢æŸ¥)
            document.getElementById('btnSmartShare').style.display = 'block';
            document.getElementById('pasteHint').style.display = 'block';
            document.getElementById('lineLink').style.display = 'none';

            const resultCard = document.getElementById('orderResult');
            resultCard.style.display = 'block';
            resultCard.scrollIntoView({behavior: "smooth"});
        }

        // ================= æ™ºæ…§åˆ†äº« (è¤‡è£½+åˆ†äº«ç…§ç‰‡+å‚™æ¡ˆ) =================
        async function smartShare() {
            const input = document.getElementById('qImages');
            const files = input.files;
            
            // æ­¥é©Ÿ1ï¼šå…ˆå¼·åˆ¶è¤‡è£½æ–‡å­—
            try {
                // å‰µå»ºä¸€å€‹è‡¨æ™‚çš„ textarea ä¾†è¤‡è£½ï¼Œç›¸å®¹æ€§æ›´é«˜
                const textArea = document.createElement("textarea");
                textArea.value = finalLineMsg;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                // ç¾ä»£ API å‚™ä»½
                if (navigator.clipboard) {
                    await navigator.clipboard.writeText(finalLineMsg);
                }
            } catch (err) {
                console.log("è¤‡è£½å¤±æ•—", err);
            }

            // æ­¥é©Ÿ2ï¼šæª¢æŸ¥æ˜¯å¦æ”¯æ´åˆ†äº« API (Chrome/Safari)
            if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([], 'test.txt')] })) {
                // æ”¯æ´ï¼šè·³å‡ºç³»çµ±åˆ†äº« (å¯é¸ç…§ç‰‡)
                try {
                    await navigator.share({
                        files: Array.from(files)
                    });
                } catch (error) {
                    // ä½¿ç”¨è€…å–æ¶ˆåˆ†äº«
                    console.log('åˆ†äº«å–æ¶ˆ');
                }
            } else {
                // ä¸æ”¯æ´ (Messenger/Line/PC)ï¼šé¡¯ç¤ºæç¤ºä¸¦è·³è½‰ LINE
                alert("âœ… é ç´„å–®æ–‡å­—å·²è¤‡è£½ï¼\n\nå› ç€è¦½å™¨é™åˆ¶ï¼Œç„¡æ³•ç›´æ¥å¸¶å…¥ç…§ç‰‡ã€‚\n\nè«‹åœ¨æ¥ä¸‹ä¾†æ‰“é–‹çš„ LINE è¦–çª—ä¸­ï¼š\n1. é•·æŒ‰è²¼ä¸Šæ–‡å­—\n2. æ‰‹å‹•é¸å–ç…§ç‰‡å‚³é€");
                
                // æ‰‹å‹•é–‹å•Ÿ LINE
                window.location.href = `https://line.me/ti/p/~${MY_LINE_ID}`;
            }
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
            const index = tabName === 'booking' ? 0 : tabName === 'rules' ? 1 : 2;
            document.querySelectorAll('.nav-item')[index].classList.add('active');
        }
    </script>
</body>
</html>
